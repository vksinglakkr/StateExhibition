<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>LawBot 2024 ‚Äì New Criminal Laws Assistant</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800;900&family=Playfair+Display:wght@700;900&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    body {
      background: radial-gradient(ellipse at top, #1e3a8a, #0f172a);
      font-family: 'Poppins', sans-serif;
      min-height: 100vh;
      position: relative;
      overflow-x: hidden;
    }
    
    body::before {
      content: '';
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background-image: 
        radial-gradient(circle at 20% 50%, rgba(251, 191, 36, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 80% 80%, rgba(249, 115, 22, 0.1) 0%, transparent 50%);
      pointer-events: none;
      z-index: 0;
    }
    
    .playfair { font-family: 'Playfair Display', serif; }
    .container-main { position: relative; z-index: 1; }
    
    .glass-card {
      background: rgba(255, 255, 255, 0.98);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.3);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
    }
    
    .gradient-text {
      background: linear-gradient(135deg, #ff6b35 0%, #f59e0b 50%, #ff6b35 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-size: 200% auto;
      animation: shimmer 3s linear infinite;
    }
    
    @keyframes shimmer { to { background-position: 200% center; } }
    
    .header-glow { position: relative; }
    .header-glow::before {
      content: '';
      position: absolute;
      top: -20px; left: 50%;
      transform: translateX(-50%);
      width: 200px; height: 200px;
      background: radial-gradient(circle, rgba(251, 191, 36, 0.3), transparent 70%);
      filter: blur(40px);
      pointer-events: none;
    }
    
    .fade-in { animation: fadeIn 0.8s ease-in-out; }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .query-type-selector {
      background: linear-gradient(135deg, #fef3c7, #fed7aa);
      border: 3px solid #f59e0b;
      border-radius: 20px;
      padding: 20px 16px;
      margin-bottom: 24px;
      box-shadow: 0 8px 24px rgba(245, 158, 11, 0.3);
    }
    
    .radio-option {
      position: relative;
      display: flex;
      align-items: flex-start;
      padding: 14px 16px;
      background: white;
      border: 3px solid #e5e7eb;
      border-radius: 16px;
      cursor: pointer;
      transition: all 0.3s;
      margin-bottom: 12px;
      min-height: 70px;
    }
    
    .radio-option:hover {
      border-color: #f59e0b;
      transform: translateX(4px);
      box-shadow: 0 4px 16px rgba(245, 158, 11, 0.2);
    }
    
    .radio-option.selected {
      border-color: #f59e0b;
      background: linear-gradient(135deg, #fffbeb, #fef3c7);
      box-shadow: 0 6px 20px rgba(245, 158, 11, 0.3);
      transform: scale(1.02);
    }
    
    .radio-option input[type="radio"] {
      width: 20px; height: 20px;
      margin-right: 12px;
      cursor: pointer;
      accent-color: #f59e0b;
      flex-shrink: 0;
    }
    
    .radio-icon { font-size: 24px; margin-right: 8px; flex-shrink: 0; }
    .radio-label-title {
      font-size: 15px;
      font-weight: 700;
      color: #1f2937;
      line-height: 1.3;
    }
    .radio-label-desc {
      font-size: 11px;
      color: #6b7280;
      line-height: 1.4;
      margin-top: 2px;
    }
    
    .law-radio-group {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 12px;
      margin-bottom: 16px;
    }
    
    .law-radio {
      display: flex;
      align-items: center;
      padding: 12px 16px;
      background: white;
      border: 3px solid #e5e7eb;
      border-radius: 14px;
      cursor: pointer;
      transition: all 0.3s;
    }
    
    .law-radio:hover {
      border-color: #3b82f6;
      box-shadow: 0 4px 12px rgba(59, 130, 246, 0.15);
    }
    
    .law-radio.selected {
      border-color: #3b82f6;
      background: linear-gradient(135deg, #eff6ff, #dbeafe);
      box-shadow: 0 4px 16px rgba(59, 130, 246, 0.25);
    }
    
    .law-radio input[type="radio"] {
      width: 18px;
      height: 18px;
      margin-right: 10px;
      cursor: pointer;
      accent-color: #3b82f6;
    }
    
    .law-radio-label {
      font-size: 14px;
      font-weight: 600;
      color: #1f2937;
    }
    
    .lang-toggle {
      display: inline-flex;
      background: rgba(255, 255, 255, 0.9);
      border-radius: 12px;
      padding: 4px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    
    .lang-toggle button {
      padding: 8px 20px;
      border-radius: 10px;
      transition: all 0.3s;
      font-size: 14px;
      font-weight: 600;
      border: none;
      background: transparent;
      color: #64748b;
    }
    
    .lang-toggle button.active {
      background: linear-gradient(135deg, #1e40af, #3b82f6);
      color: white;
      box-shadow: 0 4px 12px rgba(30, 64, 175, 0.4);
    }
    
    .mic-btn { transition: all 0.3s; }
    .mic-btn.recording {
      background: linear-gradient(135deg, #dc2626, #ef4444) !important;
      animation: pulseRec 1.5s ease-in-out infinite;
    }
    
    @keyframes pulseRec {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }
    
    .btn-primary {
      background: linear-gradient(135deg, #ff6b35, #f59e0b);
      color: white;
      font-weight: 700;
      padding: 18px 32px;
      border-radius: 16px;
      border: none;
      cursor: pointer;
      transition: all 0.3s;
      box-shadow: 0 8px 24px rgba(255, 107, 53, 0.4);
    }
    
    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 12px 32px rgba(255, 107, 53, 0.5);
    }
    
    .event-card {
      border-radius: 20px;
      padding: 20px;
      transition: all 0.3s;
      cursor: pointer;
    }
    
    .event-card:hover {
      transform: translateY(-8px) scale(1.02);
      box-shadow: 0 16px 40px rgba(0,0,0,0.2);
    }
    
    .quote-section {
      background: linear-gradient(135deg, #eff6ff, #dbeafe);
      border-left: 6px solid #3b82f6;
      border-radius: 24px;
      padding: 32px;
      box-shadow: 0 8px 24px rgba(59, 130, 246, 0.15);
      position: relative;
    }
    
    .quote-section::before {
      content: '"';
      position: absolute;
      top: -20px;
      left: 20px;
      font-size: 120px;
      color: rgba(59, 130, 246, 0.1);
      font-family: Georgia, serif;
    }

    @media (max-width: 768px) {
      .header-glow { padding: 12px 16px 8px !important; }
      .header-glow h1 { font-size: 2.5rem !important; }
      .event-card { padding: 12px !important; }
      .quote-section { padding: 16px !important; }
      .law-radio-group { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body class="min-h-screen flex flex-col items-center justify-center p-4">

  <div class="container-main w-full max-w-5xl glass-card rounded-3xl shadow-2xl overflow-hidden">
    
    <div class="relative bg-gradient-to-br from-orange-50 via-amber-50 to-yellow-50 p-6 pb-4 text-center header-glow">
      <div class="floating">
        <h1 class="text-5xl md:text-6xl font-black gradient-text mb-2 playfair tracking-tight">
          LawBot 2024
        </h1>
      </div>
      <p class="text-sm text-gray-600 font-semibold mb-3 tracking-wide">
        Your AI Assistant for New Criminal Laws
      </p>
      
      <div class="w-full max-w-2xl mx-auto px-4">
        <div class="bg-white rounded-2xl border-3 border-orange-400 py-2 px-4 shadow-xl">
          <h2 class="text-xs sm:text-sm font-black text-center bg-gradient-to-r from-orange-600 to-amber-600 bg-clip-text text-transparent leading-tight">
            Bharatiya Nyaya Sanhita ‚Ä¢ Bharatiya Nagarik Suraksha Sanhita ‚Ä¢ Bharatiya Sakshya Adhiniyam
          </h2>
        </div>
      </div>
      
      <div class="mt-3 text-center">
        <p class="text-xs text-gray-600 font-semibold">
          Last Modified: <span id="lastModified" class="text-orange-700"></span>
        </p>
      </div>
    </div>

    <div class="p-2">
      
      <div class="query-type-selector">
        <h3 class="text-xl font-bold text-gray-900 mb-4 text-center flex items-center justify-center gap-2">
          <svg class="w-6 h-6 text-orange-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
          </svg>
          What would you like to know?
        </h3>
        
        <div class="radio-option selected" id="customCard" onclick="selectQueryType('custom')">
          <input type="radio" name="queryType" value="custom" checked>
          <span class="radio-icon">‚úèÔ∏è</span>
          <label class="radio-label cursor-pointer flex-1">
            <div class="radio-label-title">Ask Your Own Question</div>
            <div class="radio-label-desc">Type any question about criminal laws</div>
          </label>
        </div>
        
        <div class="radio-option" id="readyCard" onclick="selectQueryType('ready')">
          <input type="radio" name="queryType" value="ready">
          <span class="radio-icon">üìã</span>
          <label class="radio-label cursor-pointer flex-1">
            <div class="radio-label-title">Select Ready-Made Question</div>
            <div class="radio-label-desc">Choose from 550+ categorized questions</div>
          </label>
        </div>
      </div>

      <div id="questionSection">
        
        <div id="customQuestionDiv" class="mb-8 fade-in">
          <div class="relative">
            <textarea
              id="userInput"
              rows="3"
              class="w-full rounded-2xl border-4 border-orange-400 p-4 pb-12 text-gray-900 bg-gradient-to-br from-white to-orange-50 shadow-2xl resize-none focus:border-orange-500 focus:ring-4 focus:ring-orange-200 transition-all duration-300"
              placeholder="Type your question here... (e.g., What are the changes in FIR process?)"
            ></textarea>
            <button
              id="voiceBtn"
              class="mic-btn absolute bottom-3 right-3 text-orange-500 hover:text-orange-700 transition-all bg-white rounded-full p-3 shadow-lg border-2 border-orange-300"
              title="Click to speak"
            >
              <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"/>
              </svg>
            </button>
          </div>
        </div>

        <div id="readyQuestionDiv" style="display: none;" class="mb-8 fade-in">
          <div class="flex items-center justify-between mb-4">
            <label class="text-lg font-bold text-gray-800 flex items-center gap-2">
              <svg class="w-5 h-5 text-orange-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"/>
              </svg>
              Select Question
            </label>
            <div class="lang-toggle">
              <button class="langBtn active" data-lang="English">English</button>
              <button class="langBtn" data-lang="Hindi">‡§π‡§ø‡§Ç‡§¶‡•Ä</button>
            </div>
          </div>
          
<!-- Step 1: Select Law -->
          <div class="mb-4">
            <label class="block text-sm font-bold text-gray-700 mb-3">Step 1Ô∏è‚É£: Select Law</label>
            <div class="law-radio-group">
              <div class="law-radio selected" id="lawAll" onclick="selectLaw('All')">
                <input type="radio" name="lawType" value="All" checked>
                <label class="law-radio-label cursor-pointer">üîµ All Laws</label>
              </div>
              <div class="law-radio" id="lawBNS" onclick="selectLaw('BNS')">
                <input type="radio" name="lawType" value="BNS">
                <label class="law-radio-label cursor-pointer">üü• BNS (Nyaya Sanhita)</label>
              </div>
              <div class="law-radio" id="lawBNSS" onclick="selectLaw('BNSS')">
                <input type="radio" name="lawType" value="BNSS">
                <label class="law-radio-label cursor-pointer">üü¶ BNSS (Suraksha Sanhita)</label>
              </div>
              <div class="law-radio" id="lawBSA" onclick="selectLaw('BSA')">
                <input type="radio" name="lawType" value="BSA">
                <label class="law-radio-label cursor-pointer">üü© BSA (Sakshya Adhiniyam)</label>
              </div>
            </div>
          </div>
          
          <!-- Step 2: Select Level -->
          <div class="mb-4" id="levelSection">
            <label class="block text-sm font-bold text-gray-700 mb-3">Step 2Ô∏è‚É£: Select Difficulty Level</label>
            <div class="law-radio-group">
              <div class="law-radio selected" id="levelBeginner" onclick="selectLevel('Beginner')">
                <input type="radio" name="levelType" value="Beginner" checked>
                <label class="law-radio-label cursor-pointer">‚≠ê Beginner</label>
              </div>
              <div class="law-radio" id="levelIntermediate" onclick="selectLevel('Intermediate')">
                <input type="radio" name="levelType" value="Intermediate">
                <label class="law-radio-label cursor-pointer">‚≠ê‚≠ê Intermediate</label>
              </div>
              <div class="law-radio" id="levelAdvanced" onclick="selectLevel('Advanced')">
                <input type="radio" name="levelType" value="Advanced">
                <label class="law-radio-label cursor-pointer">‚≠ê‚≠ê‚≠ê Advanced</label>
              </div>
              <div class="law-radio" id="levelTerminology" onclick="selectLevel('Terminology')">
                <input type="radio" name="levelType" value="Terminology">
                <label class="law-radio-label cursor-pointer">üìñ Terminology</label>
              </div>
            </div>
          </div>    
          <!-- Step 3: Select Category -->
          <div class="mb-4">
            <label class="block text-sm font-semibold text-gray-700 mb-2">Step 3Ô∏è‚É£: Choose Category</label>
            <select id="categorySelect" class="block w-full px-5 py-4 text-base border-3 border-orange-400 focus:ring-4 focus:ring-orange-200 rounded-2xl bg-gradient-to-br from-white to-orange-50 shadow-lg transition-all font-medium">
              <option value="" selected disabled>Choose a category...</option>
            </select>
          </div>
          
          <!-- Step 4: Select Question -->
          <div class="mb-4">
            <label class="block text-sm font-semibold text-gray-700 mb-2">Step 4Ô∏è‚É£: Select Question</label>
            <select id="questionSelect" class="block w-full px-5 py-4 text-base border-3 border-blue-400 focus:ring-4 focus:ring-blue-200 rounded-2xl bg-gradient-to-br from-white to-blue-50 shadow-lg transition-all font-medium">
              <option value="" selected disabled>First select steps above...</option>
            </select>
          </div>
        </div>

        <button 
          id="submitBtn" 
          class="w-full btn-primary flex items-center justify-center gap-3 text-xl fade-in"
        >
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"/>
          </svg>
          Ask LawBot
        </button>
      </div>

      <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 mb-4 mt-4 px-2">
        <a href="https://www.indiacode.nic.in/handle/123456789/20062" target="_blank" class="block">
          <div class="event-card bg-gradient-to-br from-green-50 to-green-100 border-l-4 border-green-600 shadow-lg">
            <div class="flex items-center gap-3">
              <svg class="w-10 h-10 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
              </svg>
              <div class="flex-1">
                <p class="font-bold text-gray-900 text-base">BNS 2023</p>
                <p class="text-xs text-gray-600">Bharatiya Nyaya Sanhita</p>
              </div>
            </div>
          </div>
        </a>

        <a href="https://www.indiacode.nic.in/handle/123456789/20099" target="_blank" class="block">
          <div class="event-card bg-gradient-to-br from-blue-50 to-blue-100 border-l-4 border-blue-600 shadow-lg">
            <div class="flex items-center gap-3">
              <svg class="w-10 h-10 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 6l3 1m0 0l-3 9a5.002 5.002 0 006.001 0M6 7l3 9M6 7l6-2m6 2l3-1m-3 1l-3 9a5.002 5.002 0 006.001 0M18 7l3 9m-3-9l-6-2m0-2v2m0 16V5m0 16H9m3 0h3"/>
              </svg>
              <div class="flex-1">
                <p class="font-bold text-gray-900 text-base">BNSS 2023</p>
                <p class="text-xs text-gray-600">Nagarik Suraksha Sanhita</p>
              </div>
            </div>
          </div>
        </a>

        <a href="https://www.indiacode.nic.in/handle/123456789/20063" target="_blank" class="block">
          <div class="event-card bg-gradient-to-br from-purple-50 to-purple-100 border-l-4 border-purple-600 shadow-lg">
            <div class="flex items-center gap-3">
              <svg class="w-10 h-10 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
              </svg>
              <div class="flex-1">
                <p class="font-bold text-gray-900 text-base">BSA 2023</p>
                <p class="text-xs text-gray-600">Bharatiya Sakshya Adhiniyam</p>
              </div>
            </div>
          </div>
        </a>
      </div>

      <div class="quote-section mb-1">
        <p class="text-xl text-gray-900 text-center leading-relaxed mb-2 relative z-10 font-semibold italic">
          "Justice delayed is justice denied."
        </p>
        <p class="text-right text-gray-600 text-sm mb-1 mt-1 font-medium">
          ‚Äì W. Edwards Deming
        </p>
        <p class="text-center text-sm text-gray-700 mb-0 mt-2 font-light leading-relaxed">
          The new criminal laws aim to ensure speedy justice for all citizens of India.
        </p>
      </div>

    </div>

    <div class="border-t-2 border-gray-200 px-6 py-4 text-center bg-gradient-to-b from-gray-50 to-white">
      <p class="text-sm text-gray-700 mb-2 font-medium">
        AI Chatbot powered by <span class="font-bold text-orange-600">Groq + Llama 3.3</span>
      </p>
      <p class="text-gray-500 text-xs mb-3">
        Designed by <strong>NIC, Kurukshetra</strong> for <strong>District Administration, Kurukshetra</strong>
      </p>
    </div>

  </div>

  <div id="aiModal" class="hidden fixed inset-0 flex items-center justify-center p-2" style="z-index: 9999; background: rgba(0,0,0,0.92);">
    <div class="bg-white rounded-3xl shadow-2xl w-full mx-2 overflow-hidden" style="max-width: 850px; max-height: 92vh;">
      <div class="flex justify-between items-center px-5 py-4 bg-gradient-to-r from-blue-600 to-indigo-700 text-white">
        <h2 class="text-xl font-bold flex items-center gap-2">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/>
          </svg>
          LawBot Response
        </h2>
        <button id="closeModal" class="hover:bg-white/20 p-2 rounded-full transition">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>

      <div class="p-5 overflow-y-auto bg-gray-50" style="max-height: calc(92vh - 180px);">
        <div class="mb-5">
          <p class="font-bold text-gray-900 mb-2">Question:</p>
          <div class="bg-gradient-to-br from-blue-50 to-indigo-50 p-4 rounded-2xl border-l-4 border-blue-500">
            <pre id="modalQuestion" class="whitespace-pre-wrap text-gray-800"></pre>
          </div>
        </div>

        <div>
          <p class="font-bold text-gray-900 mb-2">Answer:</p>
          <div class="bg-gradient-to-br from-amber-50 to-orange-50 p-4 rounded-2xl border-l-4 border-orange-500">
            <pre id="modalAnswer" class="whitespace-pre-wrap text-gray-800 text-sm leading-loose"></pre>
          </div>
        </div>
      </div>

      <div class="border-t-2 border-gray-200 p-3 bg-white flex justify-center gap-2">
        <button onclick="window.open('section-search.html', '_blank')" class="bg-gradient-to-r from-green-600 to-green-700 text-white px-5 py-2 rounded-xl hover:from-green-700 hover:to-green-800 transition text-sm font-bold shadow-lg flex items-center gap-2">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
          </svg>
          Search Exact Section
        </button>
        <button id="closeBtn" class="bg-gradient-to-r from-blue-600 to-blue-700 text-white px-5 py-2 rounded-xl hover:from-blue-700 hover:to-blue-800 transition text-sm font-bold shadow-lg">
          Close
        </button>
      </div>
    </div>
  </div>

  <script>
    console.log('üöÄ LawBot 2024 initializing...');
    
    document.addEventListener('DOMContentLoaded', function() {
      lucide.createIcons();
      console.log('‚úÖ Page loaded');
      
      // Update Last Modified DateTime
      const now = new Date();
      const options = { 
        year: 'numeric', 
        month: 'long', 
        day: 'numeric',
        hour: '2-digit',
        minute: '2-digit',
        timeZone: 'Asia/Kolkata'
      };
      const formattedDate = now.toLocaleString('en-IN', options) + ' IST';
      document.getElementById('lastModified').textContent = formattedDate;
    });

    const WEBHOOK_URL = 'https://n8n-workflow-test.duckdns.org/webhook/chatbot';

    // Complete question bank - 550+ questions
    const QUESTIONS = {
      'English': {
        'BNS': {
          'Beginner': {
            'Offences Against Human Body': [
              'What is murder under BNS?',
              'What is hurt?',
              'What is grievous hurt?',
              'What is kidnapping?',
              'What is wrongful confinement?',
              'What is criminal force?'
            ],
            'Offences Against Women & Children': [
              'What is rape under BNS?',
              'What is sexual harassment?',
              'What is outraging modesty?',
              'What is stalking?',
              'What is trafficking?'
            ],
            'Property & Economic Offences': [
              'What is theft?',
              'What is robbery?',
              'What is dacoity?',
              'What is cheating?',
              'What is criminal breach of trust?'
            ],
            'Terrorism & Organized Crime': [
              'What is terrorism under BNS?',
              'What is organized crime?'
            ],
            'Public Order & Society': [
              'What is unlawful assembly?',
              'What is rioting?',
              'What is public nuisance?'
            ],
            'Forgery & Cyber Offences': [
              'What is forgery?',
              'What is cyber fraud?',
              'What is identity theft?'
            ],
            'Public Servant & Election Offences': [
              'What is bribery of a public servant?',
              'What is obstruction of a public servant?'
            ],
            'General Principles': [
              'What does BNS replace?',
              'What is an offence under BNS?',
              'What is intention?',
              'What is abetment?'
            ]
          },
          'Intermediate': {
            'Offences Against Human Body': [
              'How does BNS differentiate between murder and culpable homicide?',
              'When can causing death be treated as an accident?',
              'When can private defence extend to causing death?',
              'What makes hurt "grievous" under BNS?',
              'What is death by negligence?',
              'What is aggravated wrongful confinement?'
            ],
            'Offences Against Women & Children': [
              'What circumstances convert sexual intercourse into rape?',
              'When does stalking become punishable?',
              'What acts constitute sexual harassment?',
              'What protections exist for minors under BNS?',
              'What is assault with intent to disrobe?',
              'What is voyeurism?'
            ],
            'Property & Economic Offences': [
              'What mental element proves theft?',
              'What additional elements convert theft into robbery?',
              'When does extortion become robbery?',
              'What must be proved to establish cheating?',
              'How does cyber fraud differ from traditional fraud?'
            ],
            'Terrorism & Organized Crime': [
              'What are the essential elements of terrorism?',
              'What acts endanger national security?',
              'What characteristics define an organized crime group?',
              'What is terror funding as per BNS?'
            ],
            'Public Order & Society': [
              'When does a protest become unlawful assembly?',
              'What is armed rioting?',
              'What is spreading harmful rumours likely to cause fear?',
              'What behaviours amount to hurting religious feelings?'
            ],
            'Forgery & Cyber Offences': [
              'What makes a digital document "forged"?',
              'What is cyber impersonation?',
              'What actions constitute electronic record tampering?',
              'What is the offence of creating fake electronic documents?'
            ],
            'Public Servant & Election Offences': [
              'What is misconduct by a public servant?',
              'When does giving false information become punishable?',
              'How is impersonation in elections handled under BNS?'
            ],
            'General Principles': [
              'What distinguishes preparation from attempt?',
              'What is criminal conspiracy under BNS?',
              'What are the elements of abetment?',
              'How does intention differ from knowledge?'
            ]
          },
          'Advanced': {
            'Offences Against Human Body': [
              'What are the legal distinctions between murder, culpable homicide, and grievous homicide as per BNS?',
              'How does BNS define the stages of culpable homicide (intention, knowledge, likelihood)?',
              'How does BNS handle "knowledge" versus "intention" in homicide cases?',
              'Explain the doctrine of transferred malice with examples.',
              'What constitutes aggravated hurt under BNS?'
            ],
            'Offences Against Women & Children': [
              'What statutory presumptions apply in rape cases under BNS?',
              'How does BNS treat rape leading to permanent disability or vegetative state?',
              'What elements convert rape into "aggravated rape"?',
              'How does BNS treat digital/online sexual assault?',
              'How is "consent" defined and interpreted under BNS?'
            ],
            'Property & Economic Offences': [
              'What distinct mental elements (mens rea) apply to theft, cheating, and misappropriation?',
              'What elements convert robbery into aggravated robbery?',
              'How does BNS treat organized financial fraud differently?',
              'Explain criminal breach of trust by a banker/public servant.',
              'What is "fraudulent transfer of property"?'
            ],
            'Terrorism & Organized Crime': [
              'How does BNS expand the definition of terrorism compared to IPC?',
              'What is the legal test for "intent to strike terror"?',
              'How is cyber-terrorism defined and differentiated?',
              'What constitutes "terror funding" and aiding terror groups?',
              'What legal elements prove "organized crime syndicate"?'
            ],
            'General Principles': [
              'What is mens rea under BNS and how is it applied differently?',
              'How is "illegal omission" defined in BNS?',
              'What are general exceptions (mistake, accident, good faith)?',
              'How does BNS apply vicarious liability?',
              'What is distinction between intention, knowledge, and recklessness?'
            ]
          }
        },
        'BNSS': {
          'Beginner': {
            'FIR & Complaint': [
              'What does BNSS replace?',
              'What is Zero FIR?',
              'What is preliminary inquiry?',
              'What is cognizable offence?',
              'What is non-cognizable offence?'
            ],
            'Arrest & Custody': [
              'What is arrest under BNSS?',
              'What is police custody?',
              'What is judicial custody?'
            ],
            'Investigation': [
              'What is an online FIR?',
              'What is a digital case diary?',
              'What is forensic investigation?'
            ],
            'Bail': [
              'What is bailable offence?',
              'What is non-bailable offence?'
            ],
            'Trial & Court Process': [
              'What is summary trial?',
              'What is plea bargaining?'
            ],
            'Witness & Victim': [
              'What is witness protection?',
              'What is victim compensation?',
              'What is victim\'s right to receive updates?'
            ],
            'Technology Use': [
              'What is video recording of search?',
              'What is electronic summons?'
            ]
          },
          'Intermediate': {
            'FIR & Complaint': [
              'When is preliminary inquiry permitted before registering FIR?',
              'What is the difference between FIR and a complaint?',
              'In which situations can FIR be transferred to another police station?',
              'How does Zero FIR help victims in emergency cases?',
              'When is refusal to register FIR allowed in BNSS?'
            ],
            'Arrest & Custody': [
              'Under what conditions can police arrest without warrant?',
              'What rules apply for arresting women at night?',
              'What is the purpose of an arrest memo?',
              'What is the rule regarding use of handcuffs?',
              'What must be communicated to the arrested person?'
            ],
            'Investigation': [
              'When is forensic examination mandatory?',
              'How should seizure of evidence be recorded?',
              'What is mandatory videography of crime scene/search?',
              'What is the time limit for completing investigation in serious offences?',
              'When is police custody justified?'
            ],
            'Bail': [
              'What factors are considered for bail in non-bailable offences?',
              'When can anticipatory bail be rejected?',
              'What conditions can be imposed while granting bail?',
              'When does default bail become applicable?'
            ],
            'Trial & Court Process': [
              'What is framing of charges?',
              'When can the accused be discharged?',
              'How is evidence recorded digitally?',
              'What is the process of plea bargaining?',
              'When does summary trial apply?'
            ]
          },
          'Advanced': {
            'FIR & Complaint': [
              'When is a preliminary inquiry legally justified before FIR?',
              'What constitutes delay in FIR and how is it evaluated?',
              'When can FIR be quashed by higher courts?',
              'How does BNSS ensure accountability for refusal to file FIR?',
              'What is FIR in cross-jurisdiction criminal acts?'
            ],
            'Investigation': [
              'How does BNSS enforce forensic-led investigation?',
              'What is the rule regarding DNA profiling?',
              'How does BNSS handle cross-border evidence collection?',
              'What is the rule on seizure of digital devices?',
              'What makes an investigation "malicious"?'
            ],
            'Bail': [
              'What conditions limit grant of anticipatory bail?',
              'When does default bail override court discretion?',
              'How is bail decided in organized crime cases?',
              'What factors justify cancellation of bail?',
              'How does BNSS treat bail for repeat offenders?'
            ]
          }
        },
        'BSA': {
          'Beginner': {
            'Relevancy & Basics': [
              'What does BSA replace?',
              'What is evidence under BSA?',
              'What is a relevant fact?'
            ],
            'Electronic Evidence': [
              'What is electronic evidence?',
              'What is admissible digital record?',
              'What is digital certificate?',
              'What is hash value?'
            ],
            'Statements & Witness': [
              'What is dying declaration?',
              'What is cross-examination?',
              'What is expert evidence?'
            ]
          },
          'Intermediate': {
            'Relevancy of Facts': [
              'What makes a fact relevant in criminal cases?',
              'How is motive treated as relevant fact?',
              'How is conduct of parties relevant?'
            ],
            'Electronic Evidence': [
              'What makes electronic records admissible?',
              'Why is hash value important?',
              'How are WhatsApp chats authenticated?',
              'What certification is required for electronic evidence?',
              'When can digital evidence be rejected?'
            ],
            'Statements & Confessions': [
              'When is confession admissible?',
              'Why is police confession generally inadmissible?',
              'What is the value of dying declaration?',
              'When can an admission be used as evidence?'
            ],
            'Witness & Testimony': [
              'Who is a competent witness?',
              'When can a child witness testify?',
              'What affects witness credibility?',
              'What weakens expert witness testimony?',
              'How is cross-examination used to test reliability?'
            ]
          },
          'Advanced': {
            'Relevancy & Admissibility': [
              'What is the difference between relevancy and admissibility?',
              'What is doctrine of res gestae?',
              'How are similar fact patterns admitted?',
              'How is illegally obtained evidence treated?',
              'What is the rule on corroboration?'
            ],
            'Electronic Evidence': [
              'What is legal importance of hash value?',
              'What certifies authenticity of WhatsApp chats?',
              'When can electronic evidence be rejected?',
              'What is chain of custody for digital files?',
              'How is deepfake evidence evaluated?'
            ],
            'Witness & Testimony': [
              'What makes witness testimony unreliable?',
              'What is contradiction vs omission?',
              'How is child witness credibility tested?',
              'When is expert witness testimony excluded?',
              'What is retracted confession and its value?'
            ]
          }
        },
        'Terminology': {
          'BNS - Offence Terms': [
            'What is culpable homicide?',
            'What is mens rea?',
            'What is actus reus?',
            'What is intention?',
            'What is knowledge?',
            'What is abetment?',
            'What is conspiracy?',
            'What is sedition?'
          ],
          'BNS - Property Crime Terms': [
            'What is theft?',
            'What is extortion?',
            'What is robbery?',
            'What is dacoity?',
            'What is criminal breach of trust?',
            'What is cheating?',
            'What is forgery?'
          ],
          'BNSS - Court Terms': [
            'What is a court?',
            'What is jurisdiction?',
            'What is a trial?',
            'What is cognizable offence?',
            'What is non-cognizable offence?',
            'What is bailable offence?',
            'What is non-bailable offence?',
            'What is summons case?',
            'What is warrant case?'
          ],
          'BNSS - Investigation Terms': [
            'What is an FIR?',
            'What is investigation?',
            'What is arrest?',
            'What is custody?',
            'What is police custody?',
            'What is judicial custody?',
            'What is remand?',
            'What is charge sheet?',
            'What is bail?',
            'What is anticipatory bail?'
          ],
          'BSA - Evidence Terms': [
            'What is evidence?',
            'What is primary evidence?',
            'What is secondary evidence?',
            'What is oral evidence?',
            'What is documentary evidence?',
            'What is electronic evidence?',
            'What is relevancy?',
            'What is admissibility?',
            'What is burden of proof?',
            'What is presumption?'
          ]
        }
      },
      'Hindi': {
        'BNS': {
          'Beginner': {
            '‡§Æ‡§æ‡§®‡§µ ‡§∂‡§∞‡•Ä‡§∞ ‡§ï‡•á ‡§µ‡§ø‡§∞‡•Å‡§¶‡•ç‡§ß ‡§Ö‡§™‡§∞‡§æ‡§ß': [
              'BNS ‡§ï‡•á ‡§§‡§π‡§§ ‡§π‡§§‡•ç‡§Ø‡§æ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?',
              '‡§ö‡•ã‡§ü ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?',
              '‡§ó‡§Ç‡§≠‡•Ä‡§∞ ‡§ö‡•ã‡§ü ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?',
              '‡§Ö‡§™‡§π‡§∞‡§£ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?',
              '‡§ó‡§≤‡§§ ‡§§‡§∞‡•Ä‡§ï‡•á ‡§∏‡•á ‡§ï‡•à‡§¶ ‡§ï‡§∞‡§®‡§æ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?',
              '‡§Ü‡§™‡§∞‡§æ‡§ß‡§ø‡§ï ‡§¨‡§≤ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?'
            ],
            '‡§Æ‡§π‡§ø‡§≤‡§æ‡§ì‡§Ç ‡§î‡§∞ ‡§¨‡§ö‡•ç‡§ö‡•ã‡§Ç ‡§ï‡•á ‡§µ‡§ø‡§∞‡•Å‡§¶‡•ç‡§ß ‡§Ö‡§™‡§∞‡§æ‡§ß': [
              'BNS ‡§ï‡•á ‡§§‡§π‡§§ ‡§¨‡§≤‡§æ‡§§‡•ç‡§ï‡§æ‡§∞ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?',
              '‡§Ø‡•å‡§® ‡§â‡§§‡•ç‡§™‡•Ä‡§°‡§º‡§® ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?',
              '‡§∂‡•Ä‡§≤ ‡§≠‡§Ç‡§ó ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?',
              '‡§™‡•Ä‡§õ‡§æ ‡§ï‡§∞‡§®‡§æ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?',
              '‡§§‡§∏‡•ç‡§ï‡§∞‡•Ä ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?'
            ],
            '‡§∏‡§Ç‡§™‡§§‡•ç‡§§‡§ø ‡§î‡§∞ ‡§Ü‡§∞‡•ç‡§•‡§ø‡§ï ‡§Ö‡§™‡§∞‡§æ‡§ß': [
              '‡§ö‡•ã‡§∞‡•Ä ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?',
              '‡§≤‡•Ç‡§ü ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?',
              '‡§°‡§ï‡•à‡§§‡•Ä ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?',
              '‡§ß‡•ã‡§ñ‡§æ‡§ß‡§°‡§º‡•Ä ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?',
              '‡§µ‡§ø‡§∂‡•ç‡§µ‡§æ‡§∏‡§ò‡§æ‡§§ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?'
            ]
          }
        },
        'BNSS': {
          'Beginner': {
            'FIR ‡§î‡§∞ ‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§': [
              'BNSS ‡§ï‡•ç‡§Ø‡§æ ‡§™‡•ç‡§∞‡§§‡§ø‡§∏‡•ç‡§•‡§æ‡§™‡§ø‡§§ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à?',
              '‡§ú‡•Ä‡§∞‡•ã FIR ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?',
              '‡§™‡•ç‡§∞‡§æ‡§∞‡§Ç‡§≠‡§ø‡§ï ‡§ú‡§æ‡§Ç‡§ö ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?',
              '‡§∏‡§Ç‡§ú‡•ç‡§û‡•á‡§Ø ‡§Ö‡§™‡§∞‡§æ‡§ß ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?',
              '‡§ó‡•à‡§∞-‡§∏‡§Ç‡§ú‡•ç‡§û‡•á‡§Ø ‡§Ö‡§™‡§∞‡§æ‡§ß ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?'
            ]
          }
        },
        'BSA': {
          'Beginner': {
            '‡§™‡•ç‡§∞‡§æ‡§∏‡§Ç‡§ó‡§ø‡§ï‡§§‡§æ ‡§î‡§∞ ‡§Æ‡•Ç‡§≤ ‡§¨‡§æ‡§§‡•á‡§Ç': [
              'BSA ‡§ï‡•ç‡§Ø‡§æ ‡§™‡•ç‡§∞‡§§‡§ø‡§∏‡•ç‡§•‡§æ‡§™‡§ø‡§§ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à?',
              'BSA ‡§ï‡•á ‡§§‡§π‡§§ ‡§∏‡§æ‡§ï‡•ç‡§∑‡•ç‡§Ø ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?',
              '‡§™‡•ç‡§∞‡§æ‡§∏‡§Ç‡§ó‡§ø‡§ï ‡§§‡§•‡•ç‡§Ø ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?'
            ]
          }
        }
      }
    };

    let selectedLanguage = 'English';
    let selectedQueryType = 'custom';
    let selectedLaw = 'All';
    let selectedLevel = 'Beginner';
    let selectedCategory = '';

    function selectQueryType(type) {
      console.log('üìò Query type:', type);
      selectedQueryType = type;
      
      const customCard = document.getElementById('customCard');
      const readyCard = document.getElementById('readyCard');
      const customDiv = document.getElementById('customQuestionDiv');
      const readyDiv = document.getElementById('readyQuestionDiv');
      
      customCard.classList.remove('selected');
      readyCard.classList.remove('selected');
      
      if (type === 'custom') {
        customCard.classList.add('selected');
        document.querySelector('input[value="custom"]').checked = true;
        customDiv.style.display = 'block';
        readyDiv.style.display = 'none';
        console.log('‚úÖ Custom mode');
      } else {
        readyCard.classList.add('selected');
        document.querySelector('input[value="ready"]').checked = true;
        customDiv.style.display = 'none';
        readyDiv.style.display = 'block';
        populateCategories();
        console.log('‚úÖ Ready mode');
      }
    }
    
    window.selectQueryType = selectQueryType;

    function selectLaw(law) {
      selectedLaw = law;
      
      // Update UI
      document.querySelectorAll('.law-radio').forEach(el => el.classList.remove('selected'));
      document.getElementById('law' + law).classList.add('selected');
      document.querySelector(`input[value="${law}"]`).checked = true;
      
      populateCategories();
      console.log('‚úÖ Law selected:', law);
    }
    
    window.selectLaw = selectLaw;

    function selectLevel(level) {
      selectedLevel = level;
      
      // Update UI
      document.querySelectorAll('[id^="level"]').forEach(el => el.classList.remove('selected'));
      document.getElementById('level' + level).classList.add('selected');
      document.querySelector(`input[value="${level}"]`).checked = true;
      
      populateCategories();
      console.log('‚úÖ Level selected:', level);
    }
    
    window.selectLevel = selectLevel;

    function populateCategories() {
      const categorySelect = document.getElementById('categorySelect');
      const questionSelect = document.getElementById('questionSelect');
      
      if (!categorySelect) return;
      
      categorySelect.innerHTML = '<option value="" selected disabled>Choose a category...</option>';
      questionSelect.innerHTML = '<option value="" selected disabled>First select steps above...</option>';
      
      let categories = [];
      
      if (selectedLevel === 'Terminology') {
        // For Terminology - show direct categories from Terminology section
        categories = Object.keys(QUESTIONS[selectedLanguage]['Terminology'] || {});
      } else if (selectedLaw === 'All') {
        // Combine all laws
        ['BNS', 'BNSS', 'BSA'].forEach(law => {
          const lawData = QUESTIONS[selectedLanguage][law];
          if (lawData && lawData[selectedLevel]) {
            Object.keys(lawData[selectedLevel]).forEach(cat => {
              categories.push(`${law}: ${cat}`);
            });
          }
        });
      } else {
        // Single law
        const lawData = QUESTIONS[selectedLanguage][selectedLaw];
        if (lawData && lawData[selectedLevel]) {
          categories = Object.keys(lawData[selectedLevel]);
        }
      }
      
      categories.forEach((category) => {
        const option = document.createElement('option');
        option.value = category;
        option.textContent = category;
        categorySelect.appendChild(option);
      });
      
      console.log('‚úÖ Categories populated:', categories.length);
    }

    function populateQuestions(category) {
      const questionSelect = document.getElementById('questionSelect');
      
      if (!questionSelect || !category) return;
      
      questionSelect.innerHTML = '<option value="" selected disabled>Select a question...</option>';
      
      let questions = [];
      
      if (selectedLevel === 'Terminology') {
        questions = QUESTIONS[selectedLanguage]['Terminology'][category] || [];
      } else if (selectedLaw === 'All' && category.includes(':')) {
        const [law, cat] = category.split(': ');
        questions = QUESTIONS[selectedLanguage][law]?.[selectedLevel]?.[cat] || [];
      } else {
        questions = QUESTIONS[selectedLanguage][selectedLaw]?.[selectedLevel]?.[category] || [];
      }
      
      questions.forEach((q) => {
        const option = document.createElement('option');
        option.value = q;
        option.textContent = q;
        questionSelect.appendChild(option);
      });
      
      console.log('‚úÖ Questions populated:', questions.length);
    }

    document.addEventListener('DOMContentLoaded', function() {
      const langButtons = document.querySelectorAll('.langBtn');
      langButtons.forEach(btn => {
        btn.addEventListener('click', function() {
          langButtons.forEach(b => b.classList.remove('active'));
          this.classList.add('active');
          selectedLanguage = this.getAttribute('data-lang');
          populateCategories();
        });
      });
      
      document.getElementById('categorySelect').addEventListener('change', function() {
        selectedCategory = this.value;
        populateQuestions(selectedCategory);
      });
      
      document.getElementById('questionSelect').addEventListener('change', function() {
        document.getElementById('userInput').value = this.value;
      });
    });

    let recognition;
    let isRecording = false;

    if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
      const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
      recognition = new SpeechRecognition();
      recognition.continuous = false;
      recognition.interimResults = false;
      recognition.lang = 'hi-IN';

      recognition.onstart = () => {
        isRecording = true;
        document.getElementById('voiceBtn').classList.add('recording');
      };

      recognition.onresult = (event) => {
        document.getElementById('userInput').value = event.results[0][0].transcript;
      };

      recognition.onend = () => {
        isRecording = false;
        document.getElementById('voiceBtn').classList.remove('recording');
      };

      recognition.onerror = () => {
        isRecording = false;
        document.getElementById('voiceBtn').classList.remove('recording');
      };
    }

    document.getElementById('voiceBtn').addEventListener('click', (e) => {
      e.preventDefault();
      if (recognition) {
        if (isRecording) {
          recognition.stop();
        } else {
          recognition.start();
        }
      } else {
        alert('Voice recognition not supported');
      }
    });

    document.getElementById('submitBtn').addEventListener('click', async () => {
      const question = document.getElementById('userInput').value.trim();
      
      if (!question) {
        alert('‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç! / Please enter your question!');
        return;
      }
      
      document.getElementById('modalQuestion').textContent = question;
      document.getElementById('modalAnswer').textContent = 'Thinking...';
      document.getElementById('aiModal').classList.remove('hidden');
      
      try {
        const response = await fetch(WEBHOOK_URL, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            question: question,
            language: selectedLanguage,
            queryType: selectedQueryType,
            law: selectedLaw,
            level: selectedLevel,
            category: selectedCategory || 'custom',
            timestamp: new Date().toISOString()
          })
        });
        
        if (!response.ok) throw new Error(`HTTP ${response.status}`);
        
        const data = await response.json();
        let answerText = data.answer || data.response || 'No response';
        
        // Replace [SEARCH_BUTTON] placeholder with nothing (button is in footer now)
        answerText = answerText.replace('[SEARCH_BUTTON]', '');
        
        document.getElementById('modalAnswer').textContent = answerText;
        console.log('‚úÖ Response received');
        
      } catch (error) {
        console.error('‚ùå Error:', error);
        document.getElementById('modalAnswer').textContent = 'Error: Could not connect. Please try again.';
      }
    });

    document.getElementById('closeModal').addEventListener('click', () => {
      document.getElementById('aiModal').classList.add('hidden');
    });

    document.getElementById('closeBtn').addEventListener('click', () => {
      document.getElementById('aiModal').classList.add('hidden');
    });

    console.log('‚úÖ LawBot ready!');
  </script>

</body>
</html>
