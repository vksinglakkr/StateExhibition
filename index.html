<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>State Level Exhibition on the New Criminal Laws</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700&display=swap" rel="stylesheet"/>
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet"/>

<style>
:root {
  --primary:#0d6efd;
  --secondary:#6c757d;
  --light-bg:#f6f9ff;
  --card-gradient: linear-gradient(135deg, #cce4ff 0%, #e6f0ff 100%);
  --success-gradient: linear-gradient(135deg, #d4edda 0%, #b2dfdb 100%);
}

body {
  font-family:'Nunito',system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial;
  background: linear-gradient(180deg,#eef5ff,#ffffff);
  padding-bottom:40px;
}

.banner {
  border-radius:12px;
  overflow:hidden;
  box-shadow:0 8px 24px rgba(13,110,253,0.15);
  margin:15px 0;
}

.banner img {
  width:100%;
  height:auto;
  display:block;
}

.title {
  color:#08306b;
  text-align:center;
  margin:15px 0 5px;
  font-weight:700;
  font-size:1.8rem;
}

.subtitle {
  color:var(--secondary);
  text-align:center;
  margin-bottom:25px;
  font-size:1.1rem;
}

.card {
  border-radius:16px;
  box-shadow:0 10px 25px rgba(0,0,0,0.08);
  padding:25px;
  margin-bottom:20px;
  background:var(--card-gradient);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.card:hover {
  transform: translateY(-5px);
  box-shadow:0 14px 28px rgba(0,0,0,0.15);
}

h5 {
  font-weight:700;
  color: var(--primary);
}

.small-muted {
  color:var(--secondary);
  font-size:.9rem;
}

textarea.form-control, input.form-control, select.form-select {
  border-radius:10px;
  border:1px solid #cfd8dc;
}

button.btn-primary, a.btn {
  border-radius:10px;
  font-weight:600;
  transition: all 0.3s ease;
}

button.btn-primary:hover, a.btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 18px rgba(13,110,253,0.25);
}

footer {
  font-size:.85rem;
  text-align:center;
  color:var(--secondary);
  margin-top:30px;
}

#feedMsg {
  font-weight:bold;
  margin-top:10px;
}

@media (max-width:420px){
  .title{font-size:1.3rem}
}
</style>
</head>
<body>
<div class="container">

  <!-- Banner -->
  <div class="banner">
    <!-- Optional Banner Image -->
  </div>

  <h3 class="title"><i class="bi bi-building"></i> State Level Exhibition on the New Criminal Laws</h3>
  <div class="subtitle">नये आपराधिक कानूनों पर राज्य स्तरीय प्रदर्शनी</div>

  <!-- Feedback Card -->
  <div class="card">
    <h5><i class="bi bi-chat-text"></i> Visitor Feedback / प्रदर्शनी प्रतिपुष्टि</h5>
    <form id="feedbackForm">
      <div class="mb-2">
        <input name="Name" class="form-control" placeholder="Name / नाम (optional)">
      </div>
      <div class="mb-2">
        <input name="Mobile" class="form-control" placeholder="Mobile No. / मोबाइल नंबर (optional)" pattern="[0-9]{10}" title="Enter 10-digit mobile number">
      </div>
      <div class="mb-2">
        <select name="Category" class="form-select" required>
          <option value="">Visitor Category / आगंतुक श्रेणी</option>
          <option value="Student">Student / विद्यार्थी</option>
          <option value="Teacher">Teacher / शिक्षक</option>
          <option value="Advocate">Advocate / अधिवक्ता</option>
          <option value="Shopkeeper">Shopkeeper / दुकानदार</option>
          <option value="Employee">Employee / कर्मचारी</option>
          <option value="Farmer">Farmer / किसान</option>
          <option value="Homemaker">Homemaker / गृहिणी</option>
          <option value="Retired">Retired / सेवानिवृत्त</option>
          <option value="Other">Other / अन्य</option>
        </select>
      </div>
      <div class="mb-2">
        <input id="District" name="District" class="form-control" placeholder="District / जिला (auto-detected when allowed)">
        <div class="small-muted mt-1">
          If location access is denied, please enter district manually. / यदि स्थान अनुमति नहीं दी गई तो जिला मैन्युअल रूप से भरें।
        </div>
      </div>
      <div class="mb-2">
        <label class="small-muted">Rating / रेटिंग</label>
        <select name="Rating" class="form-select">
          <option value="5">Excellent / उत्कृष्ट</option>
          <option value="4">Good / अच्छा</option>
          <option value="3">Average / औसत</option>
          <option value="2">Below Average / औसत से कम</option>
          <option value="1">Poor / खराब</option>
        </select>
      </div>
      <div class="mb-2">
        <label class="small-muted">Comments / सुझाव</label>
        <select id="commentTemplate" class="form-select mb-2">
          <option value="">-- Select a comment template --</option>
          <option value="Very informative exhibition. I learned about new laws.">Very informative exhibition. / बहुत उपयोगी प्रदर्शनी</option>
          <option value="Presentation is clear and easy to understand.">Presentation is clear / प्रस्तुति स्पष्ट</option>
          <option value="Need more examples or visual displays.">Need more examples / अधिक उदाहरण</option>
          <option value="Excellent initiative by the State.">Excellent initiative / राज्य की उत्कृष्ट पहल</option>
        </select>
        <textarea name="Comments" class="form-control" rows="2" placeholder="Type your own comment / अपना सुझाव लिखें"></textarea>
      </div>

      <input type="hidden" id="Latitude" name="Latitude">
      <input type="hidden" id="Longitude" name="Longitude">

      <div class="d-grid mt-2">
        <button type="submit" class="btn btn-primary btn-lg">Submit Feedback / जमा करें</button>
      </div>
      <div id="feedMsg" class="small-muted"></div>
    </form>
  </div>

  <!-- Ask Question (AI) Card -->
  <div class="card" style="background: var(--success-gradient)">
    <h5><i class="bi bi-robot"></i> Ask Question (with AI) / प्रश्न पूछें (AI के साथ)</h5>
    <p class="small-muted">Open the AI-powered chatbot in a new tab for interactive questions.</p>
    <div class="d-grid">
      <a href="chatbot.html" target="_blank" class="btn btn-success btn-lg">Open Chatbot</a>
    </div>
  </div>

   <!-- Stalls link -->
  <div class="text-center mb-4">
    <a href="Stalls.html" class="btn btn-info btn-lg w-100">Explore All Stalls / स्टॉल देखें</a>
  </div>

  <footer>
    State Level Exhibition on the New Criminal Laws | नये आपराधिक कानूनों पर राज्य स्तरीय प्रदर्शनी
  </footer>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<script>
const WEBHOOK_URL = 'https://poonamvinod.app.n8n.cloud/webhook/Exhibition';
const commentTemplate = document.getElementById('commentTemplate');
const commentsField = document.querySelector('textarea[name="Comments"]');
if (commentTemplate && commentsField) {
  commentTemplate.addEventListener('change', () => {
    commentsField.value = commentTemplate.value;
  });
}

function tryAutoLocation() {
  return new Promise((resolve) => {
    if (!navigator.geolocation) return resolve(false);
    navigator.geolocation.getCurrentPosition(async (pos) => {
      const lat = pos.coords.latitude.toFixed(6);
      const lon = pos.coords.longitude.toFixed(6);
      document.getElementById('Latitude').value = lat;
      document.getElementById('Longitude').value = lon;
      try {
        const resp = await fetch(`https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${lat}&longitude=${lon}&localityLanguage=en`);
        if (resp.ok) {
          const j = await resp.json();
          const districtVal = j.city || j.locality || j.principalSubdivision || '';
          const districtEl = document.getElementById('District');
          if (districtEl && (!districtEl.value || districtEl.value.trim() === '')) districtEl.value = districtVal;
        }
      } catch (e) { console.warn('Reverse geocode failed', e); }
      resolve(true);
    }, (err) => { console.warn(err); resolve(false); }, {timeout:10000});
  });
}

document.addEventListener('DOMContentLoaded', () => tryAutoLocation());

const feedbackForm = document.getElementById('feedbackForm');
const feedMsg = document.getElementById('feedMsg');

feedbackForm.addEventListener('submit', async (ev) => {
  ev.preventDefault();
  feedMsg.style.display = 'none';
  const submitBtn = feedbackForm.querySelector('button[type="submit"]');
  if (submitBtn) submitBtn.disabled = true;

  if (!document.getElementById('Latitude').value || !document.getElementById('Longitude').value) {
    await tryAutoLocation();
  }

  const fd = new FormData(feedbackForm);
  const payload = Object.fromEntries(fd.entries());
  payload.Timestamp = new Date().toISOString();

  try {
    const res = await fetch(WEBHOOK_URL, { method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify(payload) });
    if(res.ok){
      feedMsg.style.color='green';
      feedMsg.textContent='Thank you — feedback submitted successfully! / धन्यवाद — प्रतिक्रिया सफलतापूर्वक भेजी गई!';
      feedMsg.style.display='block';
      feedbackForm.reset();
    } else throw new Error('HTTP '+res.status);
  } catch(err){
    console.error(err);
    feedMsg.style.color='red';
    feedMsg.textContent='Submission failed. Please try again. / भेजने में विफल। कृपया पुनः प्रयास करें।';
    feedMsg.style.display='block';
  } finally { if(submitBtn) submitBtn.disabled=false; }
});
</script>
</body>
</html>




