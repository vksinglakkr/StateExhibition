<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>State Exhibition â€” New Prosecution Laws 2024</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest"></script>

  <style>
    body {
      background: linear-gradient(135deg, #e0f2fe 0%, #fef3c7 100%);
      font-family: 'Inter', sans-serif;
    }
    .fade-in {
      animation: fadeIn 0.5s ease-in-out;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .chat-bubble {
      position: fixed;
      bottom: 24px;
      right: 24px;
      width: 64px;
      height: 64px;
      border-radius: 50%;
      background: linear-gradient(135deg, #2563eb, #1e40af);
      box-shadow: 0 6px 18px rgba(0,0,0,0.25);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      cursor: pointer;
      transition: transform 0.25s ease;
      z-index: 40;
    }
    .chat-bubble:hover {
      transform: scale(1.08);
    }
  </style>
</head>
<body class="min-h-screen flex flex-col items-center justify-center p-4">

  <!-- Chat Card (hidden initially) -->
  <div id="chatCard" class="hidden fixed bottom-28 right-6 bg-white rounded-2xl shadow-2xl w-full max-w-md fade-in border border-gray-200">
    <div class="bg-gradient-to-r from-blue-800 to-indigo-600 text-white rounded-t-2xl p-4 flex justify-between items-center">
      <div class="flex items-center gap-3">
        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/1/17/Emblem_of_India.svg/512px-Emblem_of_India.svg.png" class="w-8 h-8">
        <h1 class="text-lg font-semibold leading-tight">New Prosecution Laws 2024</h1>
      </div>
      <button id="closeChat" class="text-white hover:text-gray-200">
        <i data-lucide="x"></i>
      </button>
    </div>

    <div class="p-4 space-y-4 max-h-[75vh] overflow-y-auto">
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Your Name</label>
        <input id="name" class="w-full rounded-lg border-gray-300 focus:ring-2 focus:ring-blue-600 p-2" placeholder="e.g. Vinod Singla">
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Select a ready question</label>
        <div id="sampleQuestions" class="max-h-40 overflow-auto border rounded-lg p-2 space-y-2 bg-gray-50 text-sm"></div>
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Or type your question</label>
        <textarea id="question" rows="3" class="w-full rounded-lg border-gray-300 focus:ring-2 focus:ring-blue-600 p-2" placeholder="Type your custom question..."></textarea>
      </div>

      <div class="flex justify-between items-center">
        <button id="submitBtn" class="flex items-center gap-2 bg-blue-700 text-white px-4 py-2 rounded-lg shadow hover:bg-blue-800 transition">
          <i data-lucide="send"></i><span>Ask</span>
        </button>
        <span id="status" class="text-gray-500 text-sm"></span>
      </div>

      <div id="responseBox" class="hidden border-t pt-3">
        <p class="text-sm font-semibold text-blue-700 mb-1 flex items-center gap-1"><i data-lucide="message-circle"></i> AI Response:</p>
        <pre id="aiAnswer" class="whitespace-pre-wrap text-gray-800 text-sm"></pre>
        <div class="mt-2 flex gap-2 justify-end">
          <button id="copyBtn" class="flex items-center gap-1 px-3 py-1 border rounded hover:bg-gray-100 transition text-sm"><i data-lucide="copy"></i> Copy</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Floating Chat Bubble -->
  <div id="openChat" class="chat-bubble" title="Chat about New Prosecution Laws">
    <i data-lucide="message-circle"></i>
  </div>

  <script>
    lucide.createIcons();

    const WEBHOOK_URL = 'https://vinodnic.app.n8n.cloud/webhook/chatbot';

    const samples = [
      "What are the three new prosecution laws implemented since 2024?",
      "How have the new laws changed the FIR process?",
      "Are bail provisions modified under the new system?",
      "How are cybercrimes treated under the new prosecution laws?",
      "What changes exist in the evidence collection process?",
      "Do victims get more rights or faster justice now?",
      "Are new offences introduced or penalties enhanced?",
      "How do the new laws ensure speedy trials?",
      "Do these laws affect existing criminal cases?",
      "Any changes to police powers or arrest procedures?",
      "What about reforms in case hearings and appeals?",
      "How are economic crimes handled differently?",
      "Do these laws simplify court processes?",
      "Is digital submission of evidence allowed now?",
      "What are the main benefits for citizens?",
      "How do these laws support fair prosecution?",
      "Are there any guidelines for prosecutors?",
      "What are the penalties for delaying investigation?",
      "How can I access the official text of the laws?",
      "Do these laws align with constitutional rights?"
    ];

    const container = document.getElementById('sampleQuestions');
    samples.forEach((q,i)=>{
      const id='q'+i;
      const div=document.createElement('div');
      div.className='flex items-start';
      div.innerHTML=`
        <input type="radio" id="${id}" name="sampleQ" value="${q}" class="mt-1 text-blue-600 focus:ring-blue-600">
        <label for="${id}" class="ml-2 text-gray-700 cursor-pointer hover:text-blue-700">${q}</label>`;
      container.appendChild(div);
    });

    container.addEventListener('change',e=>{
      if(e.target.name==='sampleQ')
        document.getElementById('question').value=e.target.value;
    });

    // Open/Close chat
    const chatCard=document.getElementById('chatCard');
    const openChat=document.getElementById('openChat');
    const closeChat=document.getElementById('closeChat');
    openChat.onclick=()=>{chatCard.classList.remove('hidden');};
    closeChat.onclick=()=>{chatCard.classList.add('hidden');};

    // Submit handler
    document.getElementById('submitBtn').addEventListener('click',async()=>{
      const name=document.getElementById('name').value.trim()||'Anonymous';
      const question=document.getElementById('question').value.trim();
      if(!question){alert('Please select or type a question');return;}
      document.getElementById('submitBtn').disabled=true;
      document.getElementById('status').textContent='Please wait...';
      try{
        const res=await fetch(WEBHOOK_URL,{
          method:'POST',
          headers:{'Content-Type':'application/json'},
          body:JSON.stringify({name,question})
        });
        const data=await res.json();
        document.getElementById('aiAnswer').textContent=data.answer||JSON.stringify(data,null,2);
        document.getElementById('responseBox').classList.remove('hidden');
      }catch(err){
        alert('Error: '+err.message);
      }finally{
        document.getElementById('submitBtn').disabled=false;
        document.getElementById('status').textContent='';
      }
    });

    document.getElementById('copyBtn').onclick=()=>{
      navigator.clipboard.writeText(document.getElementById('aiAnswer').textContent);
      alert('Copied to clipboard');
    };
  </script>
</body>
</html>
